function liteChart(t,e){if(null!=document.getElementById(t))throw new Error("DOM id "+t+" is already exist.");this.id=t,panel=document.createElementNS("http://www.w3.org/2000/svg","svg"),panel.setAttribute("id",t),panel.setAttribute("class",t);var i={animate:{show:!this.isIE,duration:.5},axisX:{show:!0,color:"#e9edf1",width:2,value:"",minValue:0,maxValue:0},axisY:{show:!0,color:"#e9edf1",width:2,value:"",minValue:0,maxValue:0},eventCoord:{x:0,y:0},fill:"gradient",gridX:{show:!0,interval:0,fill:1,label:{show:!0},stroke:"#e9edf1",width:2,dasharray:"0 10.04",linecap:"round"},gridY:{show:!0,interval:0,fill:1,label:{show:!0},stroke:"#e9edf1",width:2,dasharray:"0 10.04",linecap:"round"},isIE:"Netscape"==navigator.appName&&-1!=navigator.userAgent.search("Trident")||-1!=navigator.userAgent.toLowerCase().indexOf("msie"),labels:{show:!0,fontColor:"#c5c6d0",fontSize:12,fontFamily:"sans-serif",fontWeight:"normal",list:null},legends:{list:null,map:null,table:{show:!0,position:{x:"center",y:370},direction:"horizontal"},fill:"#c5c6d0"},line:{width:3,style:"curve",shadow:!0,dasharray:null},padding:{top:55,right:15,bottom:40,left:20},panel:panel,point:{show:!0,radius:5,strokeWidth:5,stroke:"#ffffff"},tooltip:{show:!0,backgroundColor:"rgba(255, 255, 255, 0.8)",fontColor:"#000000",object:null},type:"Line",valueOnliteChart:{show:!1}};Object.assign(this,i,e)}function createElement(t,e){for(var i in el=document.createElementNS("http://www.w3.org/2000/svg",t),e)el.setAttribute(i,e[i]);return el}function createText(t,e,i,l,n,a,o,r){navigator.userAgent.toLowerCase();chart.isIE&&("hanging"==a?i+=l:"middle"==a&&(i+=l/2));let d=createElement("text",{id:t,x:e.toFixed(0),y:i.toFixed(0),"font-size":l,"text-anchor":n,fill:o});return chart.isIE||d.setAttribute("alignment-baseline",a),d.innerHTML=r,d.textContent=r,d}function getPath(t,e){return i=0,path="","straight"===t.line.style?e.forEach(function(t){0===i&&(path+=" M "),path+=t.x1.toFixed(0)+" "+t.y1.toFixed(0)+" ",++i,e.length===i&&(path+=t.x2.toFixed(0)+" "+t.y2.toFixed(0))}):"curve"===t.line.style&&e.forEach(function(t){0===i&&(path+="M "+t.x1.toFixed(0)+" "+t.y1.toFixed(0)),path+=" C "+t.cx1.toFixed(0)+" "+t.cy1.toFixed(0)+" "+t.cx2.toFixed(0)+" "+t.cy2.toFixed(0)+" "+t.x2.toFixed(0)+" "+t.y2.toFixed(0),++i}),path}liteChart.prototype.getWidth=function(){return this.panel.getBoundingClientRect().width},liteChart.prototype.getHeight=function(){return this.panel.getBoundingClientRect().height},liteChart.prototype.setLabels=function(t){this.labels.list=t},liteChart.prototype.addLegend=function(t){let e=null,i=null,l=null;null==this.legends.list&&(this.legends.list=new Array),null==t.fill&&(e=Math.floor(255*Math.random()),i=Math.floor(255*Math.random()),l=Math.floor(255*Math.random()),t.fill="rgba("+e+", "+i+", "+l+", 0.9)"),null==t.stroke&&(null!=e&&(e=(e-=10)<0?0:e,i=(i-=10)<0?0:i,l=(l-=10)<0?0:l),t.stroke="rgba("+e+", "+i+", "+l+", 1)"),this.legends.list.push(t),null==this.legends.map&&(this.legends.map=new Map),this.legends.map.set(t.name,t)},liteChart.prototype.removeLegend=function(t){let e=-1;if(null!=this.legends.list){for(let i=0;i<this.legends.list.length;i++)if(this.legends.list[i].name==t){e=i;break}e>-1&&(this.legends.list.splice(e,1),this.legends.map.delete(t))}},liteChart.prototype.getLegend=function(t){return this.legends.map.get(t)},liteChart.prototype.getMinValue=function(){let t=0,e=this.legends.list;this.values;return e.forEach(function(e){e.values.forEach(function(e){t>e&&(t=e)})}),t},liteChart.prototype.getMaxValue=function(){let t=0,e=this.legends.list;this.values;return e.forEach(function(e){e.values.forEach(function(e){t<e&&(t=e)})}),t},liteChart.prototype.showTooltip=function(t,e,i){let l=t.clientX,n=t.clientY;if(l==i.eventCoord.x&&n==i.eventCoord.y)return;i.eventCoord.x=l,i.eventCoord.y=n;let a=e.getAttribute("legend"),o=i.getLegend(a),r=e.getAttribute("value"),d=e.getAttribute("label"),s=i.labels.fontSize,h=.5*s,p=h,u=s+2*h,c=2*s+3*h,g=0,f=0,b=0,x=3*s+4*h,m=i.tooltip.object;if(l+=10,n+=10,null==m||null==m){m=document.createElementNS("http://www.w3.org/2000/svg","g"),i.isIE||m.classList.add("tooltips");let t=createElement("rect",{id:i.id+"-tooltip",x:l,y:n,width:0,height:x,fill:i.tooltip.backgroundColor,stroke:"transparent",rx:5,ry:5});m.appendChild(t);let e=createText(i.id+"-tooltip-label-text",l+h,n+p,s,"start","hanging",i.tooltip.fontColor,d);m.appendChild(e);let C=createElement("rect",{id:i.id+"-tooltip-legend-mark",x:l+h,y:n+u,width:s,height:s,fill:o.fill,stroke:o.stroke});m.appendChild(C);let w=createText(i.id+"-tooltip-legend-name",l+(2*h+s),n+u,s,"start","hanging",i.tooltip.fontColor,a+": ");m.appendChild(w);let y=createText(i.id+"-tooltip-value",l+h,n+c,s,"start","hanging",i.tooltip.fontColor,r);m.appendChild(y),i.tooltip.object=m,i.panel.appendChild(i.tooltip.object),g=((f=1*C.getAttribute("width")+h+w.getBoundingClientRect().width)>(b=y.getBoundingClientRect().width)?f:b)+2*h,t.setAttribute("width",g)}else{let t=(m=i.tooltip.object).childNodes[0],e=m.childNodes[1],C=m.childNodes[2],w=m.childNodes[3],y=m.childNodes[4];t.setAttribute("x",l),t.setAttribute("y",n),e.setAttribute("x",l+h),e.setAttribute("y",n+p),e.innerHTML=d,C.setAttribute("x",l+h),C.setAttribute("y",n+u),C.setAttribute("fill",o.fill),C.setAttribute("stroke",o.stroke),w.setAttribute("x",l+(2*h+s)),w.setAttribute("y",n+u),w.innerHTML=a,y.setAttribute("x",l+h),y.setAttribute("y",n+c),y.innerHTML=r,g=((f=1*C.getAttribute("width")+h+w.getBoundingClientRect().width)>(b=y.getBoundingClientRect().width)?f:b)+2*h,t.setAttribute("width",g),(l<0||l+g>i.getWidth())&&(l=i.getWidth()-g,t.setAttribute("x",l),e.setAttribute("x",l+h),C.setAttribute("x",l+h),w.setAttribute("x",l+(2*h+s)),y.setAttribute("x",l+h)),(n<0||n+x>i.getHeight())&&(n=i.getHeight()-x,t.setAttribute("y",n),e.setAttribute("y",n+p),C.setAttribute("y",n+u),w.setAttribute("y",n+u),y.setAttribute("y",n+c))}},liteChart.prototype.hideTooltip=function(t,e){let i=t.clientX,l=t.clientY;if(i==e.eventCoord.x&&l==e.eventCoord.y)return;e.eventCoord.x=i,e.eventCoord.y=l;let n=e.tooltip.object;if(null!=n){let t=e.getWidth()+10,i=e.getHeight()+10,l=null;for(let e=0;e<n.childNodes.length;e++)(l=n.childNodes[e]).setAttribute("x",t),l.setAttribute("y",i)}},liteChart.prototype.inject=function(t){t.appendChild(this.panel);let e=this,i=this.panel;i.style.width=t.clientWidth,i.style.height=t.clientHeight,window.addEventListener("resize",function(){i.style.width=t.clientWidth,i.style.height=t.clientHeight,e.tooltip.object=null,e.draw(!1)})},liteChart.prototype.restartAnimation=function(){let t=this.panel.getElementsByTagName("animate");for(let e=0;e<t.length;e++)t[e].beginElement()},liteChart.prototype.draw=function(t){var e="http://www.w3.org/2000/svg";for(null==t&&(t=!0);this.panel.firstChild;)this.panel.removeChild(this.panel.firstChild),this.tooltip.object=null;let l=function(t,e,i,l,n,a,o,r){let d=null==r?1:r;return createElement("line",{id:t,x1:e.toFixed(0),y1:i.toFixed(0),x2:l.toFixed(0),y2:n.toFixed(0),stroke:o,"stroke-width":d})},n=function(t,e,i,l,n,a){return path=getPath(t,i),-1!==e.indexOf("area")&&(first=i[Object.keys(i)[0]],path=path+" V"+(b-65)+" H"+first.x1.toFixed(0)+" L "+first.x1.toFixed(0)+" "+first.y1.toFixed(0),n=0),createElement("path",{id:e,d:path,fill:null==a?"transparent":a,stroke:l,"stroke-width":n})},a=function(t,i,l,n,a){let o=document.createElementNS(e,"g");path=getPath(t,n);let d=createElement("path",{id:i,d:path,fill:"transparent",stroke:l,opacity:"0.5","stroke-width":t.line.width,filter:"url(#"+i+")"}),s=createElement("defs"),h=createElement("filter",{id:i,y:0,x:0}),p=createElement("feOffset",{result:"offOut",in:"SourceGraphic",dx:0,dy:7}),u=createElement("feGaussianBlur",{stdDeviation:5,in:"offOut"}),c=createElement("feBlend",{in:"SourceGraphic",in2:"blurOut",mode:"normal"});return o.appendChild(s),o.appendChild(d),t.animate.show&&(animation=r(t,d,a),d.appendChild(animation)),s.appendChild(h),h.appendChild(p),h.appendChild(u),h.appendChild(c),o},o=function(t,e,i,l,n){return createElement("animate",{attributeName:t,from:e,to:i,dur:l,fill:n})},r=function(t,e,i){return lineD0=getPath(t,i),lineD1=e.getAttribute("d"),e.setAttribute("d",lineD0),animation=o("d",lineD0,lineD1,t.animate.duration,"freeze"),animation},d=function(t){return t.toString().replace(/\B(?=(\d{3})+(?!\d))/g,"")},s=function(t){let e=0;if(!t.gridX.label.show)return;let i=t.labels.fontSize/3,l=null,n=null,a=0,o=0;return"Line"==t.type&&(l=createText("tempTextForCalculateWidth",0,0,t.labels.fontSize,"end","middle",t.labels.fontColor,d(t.getMaxValue())),t.panel.appendChild(l),a=l.getBoundingClientRect().width,n=createText("tempTextForCalculateWidth",0,0,t.labels.fontSize,"end","middle",t.labels.fontColor,d(t.getMinValue())),t.panel.appendChild(n),a=a>(o=n.getBoundingClientRect().width)?a:o,t.panel.removeChild(l),t.panel.removeChild(n)),e=i+a+10+i},h=function(t){let e=0;if(t.labels.show){let i=t.labels.fontSize/2;e=i+t.labels.fontSize+i}return e},p=function(t){let e=t.axisY.minValue,i=t.getMinValue();return 0==e&&0>i&&(e=i),e},u=function(t){let e=t.axisY.maxValue,i=t.getMaxValue();return 0==e&&0<i&&(e=i),e},c=function(t){let e=u(t)-p(t);return(t.getHeight()-t.padding.top-t.padding.bottom-h(t))/e},g=function(t){let e=t.getHeight()-t.padding.bottom-h(t),i=u(t),l=p(t);return i<0?e=t.padding.top:l<0&&(e=t.padding.top+i*c(t)),e},f=this.getWidth(),b=this.getHeight(),x=this.padding.top,m=this.padding.bottom+h(this),C=this.padding.left+s(this),w=this.padding.right,y=f-C-w,v=b-x-m,E=function(t){if(!t.legends.table.show)return;let n=t.legends.table.position.x,a=!1,o=!1;"center"==n?(a=!0,n=0):"right"==n&&(o=!0,n=0);let r=t.legends.table.position.y,d=null,s=null,h=0,p=0,u=.5*t.labels.fontSize,c=0,g=0,f=0,b=new Array;n+=u;let x=t.panel,m=t.labels,C=t.legends.table,w=document.createElementNS(e,"g");if(t.isIE||w.classList.add("legends"),x.appendChild(w),t.legends.list.forEach(function(e){"vertical"==C.direction?(p=r+u+3*u*h,d=function(t,e,i,l,n,a,o){return createElement("rect",{id:t,x:e,y:i,width:l,height:n,fill:a,stroke:o})}(id+"-mark-"+h,n,p,m.fontSize,m.fontSize,e.fill,e.stroke),w.appendChild(d),b.push(d),s=createText(id+"-text-"+h,n+u+m.fontSize,p,m.fontSize,"start","hanging",C.fontColor,e.name),w.appendChild(s),b.push(s),t.isIE||s.classList.add("legend"),c=u+m.fontSize+u+s.getBoundingClientRect().width,g=g>c?g:c,f+=u+m.fontSize):"horizontal"==C.direction&&(p=r+u+3*u*0,d=l(id+"-mark-"+h,n,p+6,n+12,p+6,e.fill,e.stroke,4),w.appendChild(d),b.push(d),n+=m.fontSize+u,s=createText(id+"-text-"+h,n,p,m.fontSize,"start","hanging",C.fontColor,e.name),w.appendChild(s),b.push(s),t.isIE||s.classList.add("legend"),n+=s.getBoundingClientRect().width+u,c+=u+m.fontSize+u+s.getBoundingClientRect().width,g=g>c?g:c,f=1*(u+m.fontSize)),++h}),a){let e=(t.getWidth()-g-u)/2;i=0,b.forEach(function(t){if("line"===t.nodeName){let l=1*t.getAttribute("x1")+e+i,n=1*t.getAttribute("x2")+e+i;t.setAttribute("x1",Math.round(l)),t.setAttribute("x2",Math.round(n))}else if("text"===t.nodeName){let l=1*t.getAttribute("x");t.setAttribute("x",l+e+i),i+=20}})}else if(o){let e=t.getWidth()-g-2*u;b.forEach(function(t){let i=1*t.getAttribute("x");t.setAttribute("x",i+e)})}},A=function(t){if(!t.axisX.show)return;let e=g(t),i=t.padding.left+s(t)-5,n=t.getWidth()-t.padding.right,a=l(t.id+"-axis-x",i,e,n,e,t.axisX.color,t.axisX.color,t.axisX.width);return t.isIE||a.classList.add("axis-x"),a},k=function(t){if(!t.axisY.show)return;let e=C,i=t.padding.top,n=t.getHeight()-t.padding.bottom-h(t)+5,a=l(t.id+"-axis-y",e,i,e,n,t.axisY.color,t.axisY.color,t.axisY.width);return t.isIE||a.classList.add("axis-y"),a},L=function(t){if(null==t.labels.list)return;let i=t.labels.list.length,l=y/(3*i+1),o="",d=0;t.legends.list.forEach(function(s){let h=0,u=0,f=0,b=0,x=null,m=0,w=null,y=null;var E=[],A=[];if(s.values.forEach(function(e){if(i>h){if(f=C+l/2+3*l/2+3*l*h,m=t.padding.top+v-(e-p(t))*c(t),null!=x&&m>=t.padding.top-.1&&m<=t.padding.top+v+.1){o=t.id+"-line-"+d+"-"+h;var n={x1:u,y1:x,cx1:(u+f)/2,cy1:x,x2:f,y2:m,cx2:(u+f)/2,cy2:m};if(E.push(n),t.animate.show){var a={x1:u,y1:g(t),cx1:(u+f)/2,cy1:g(t),x2:f,y2:g(t),cx2:(u+f)/2,cy2:g(t)};A.push(a)}}u=f,b=x,x=m,++h}}),w=n(t,"line-"+d,E,s.stroke,t.line.width,"transparent"),null!==t.line.dasharray&&w.setAttribute("stroke-dasharray",t.line.dasharray),t.isIE||(w.classList.add("line"),w.classList.add("line-"+d)),t.animate.show&&(y=r(t,w,A),w.appendChild(y)),t.panel.appendChild(w),"gradient"===t.fill||"origin"===t.fill){let i=document.createElementNS(e,"g");t.panel.appendChild(i),"gradient"===t.fill&&(linear=function(t,e){let i=createElement("linearGradient",{id:t,x1:"0%",y1:"0%",x2:"0%",y2:"100%"}),l=createElement("stop",{offset:"0%","stop-color":e,"stop-opacity":"0.1"}),n=createElement("stop",{offset:"100%","stop-color":e,"stop-opacity":"0"});return i.appendChild(l),i.appendChild(n),i}(s.stroke,s.stroke),i.appendChild(linear)),fill="origin"===t.fill?s.stroke:"url(#"+s.stroke+")",grad=n(t,"area-"+d,E,s.stroke,t.line.width,fill),t.isIE||(grad.classList.add("gradient"),grad.classList.add("gradient-"+d)),t.animate.show&&(grads=n(t,"area-"+d,E,s.stroke,t.line.width,fill),y=r(t,grads,A),grad.appendChild(y)),i.appendChild(grad)}1==t.line.shadow&&(blur=a(t,"elem-"+d+"-blur",s.stroke,E,A),t.panel.appendChild(blur)),++d})},S=function(t){if(null==t.labels.list)return;let i=t.labels.list.length,l=y/(3*i+1),n="",a=0;t.legends.list.forEach(function(r){let s=0,h=0,u=0,f=null,b=null,x=0,m=t.padding.top+v-t.labels.fontSize/3,w=document.createElementNS(e,"g");t.panel.appendChild(w),r.values.forEach(function(e){if(i>s){if(h=C+l/2+3*l/2+3*l*s,u=t.padding.top+v-(e-p(t))*c(t),t.point.show&&u>=t.padding.top-.1&&u<=t.padding.top+v+.1&&(n=t.id+"-line-point-"+a+"-"+s,stroke=null===t.point.stroke?r.stroke:t.point.stroke,(f=function(t,e,i,l,n,a,o){return createElement("circle",{id:t,cx:e,cy:i,r:l,fill:n,stroke:a,"stroke-width":o})}(n,h,u,t.point.radius,r.stroke,stroke,t.point.strokeWidth)).style.cursor="pointer",t.isIE||f.classList.add("point"),t.animate.show&&(f.setAttribute("cy",g(t)),pointMove=o("cy",g(t),u,t.animate.duration,"freeze"),f.appendChild(pointMove),f.setAttribute("r",0),pointMove=o("r",0,t.point.radius,t.animate.duration,"freeze"),f.appendChild(pointMove)),w.appendChild(f),t.tooltip.show)){f.setAttribute("legend",r.name),f.setAttribute("value",d(e)),f.setAttribute("label",t.labels.list[s]),$(window).width()<=1100?(f.addEventListener("click",function(e){t.showTooltip(e,this,t)}),f.addEventListener("click",function(e){t.showTooltip(e,this,t)}),f.addEventListener("click",function(e){t.hideTooltip(e,t)})):(f.addEventListener("mouseover",function(e){t.showTooltip(e,this,t)}),f.addEventListener("mousemove",function(e){t.showTooltip(e,this,t)}),f.addEventListener("mouseout",function(e){t.hideTooltip(e,t)}))}t.valueOnliteChart.show&&(n=t.id+"-line-"+a+"-"+s+"-value",x=u-t.point.radius-t.labels.fontSize/3,(x=m<x?m:x)>t.labels.fontSize&&(b=createText(n,h,x,t.labels.fontSize,"middle","baseline",t.labels.fontColor,d(e)),t.isIE||(b.classList.add("line-value"),b.classList.add("line-value-"+a)),t.animate.show&&(b.setAttribute("y",g(t)),pointMove=o("y",g(t),x,t.animate.duration,"freeze"),b.appendChild(pointMove),b.setAttribute("font-size",0),pointMove=o("font-size",0,t.labels.fontSize,t.animate.duration,"freeze"),b.appendChild(pointMove)),w.appendChild(b))),++s}}),++a})};"Line"==this.type&&(!function(t){if(!t.gridX.show)return;let i=p(t),l=u(t),n=t.gridX.interval;if(0==n){let t=l-i,e=Math.round(t/5),a=(""+e).length,o=Math.pow(10,a-1);n=Math.floor(e/o)*o}let a=Math.ceil(i/n)*n,o=0,r=0,s=null,g=null,b=t.labels.fontSize,x=(t.labels.fontFamily,t.labels.fontWeight,document.createElementNS(e,"g"));for(t.panel.appendChild(x);a<=l;)a<i?a+=n:(o=t.getHeight()-t.padding.bottom-h(t)-(a-i)*c(t),s=createElement("line",{id:t.id+"-grid-x-"+r,x1:C-5,y1:o,x2:f-w,y2:o,stroke:t.gridX.stroke,"stroke-width":t.gridX.width,"stroke-dasharray":t.gridX.dasharray,"stroke-linecap":t.gridX.linecap}),t.isIE||(s.classList.add("grid"),s.classList.add("grid-x")),x.appendChild(s),val=d(a),t.axisX.value&&(val+=" "+t.axisX.value),t.gridX.label.show&&o>=b/2&&(id=t.id+"-grid-x-"+r+"-label",g=createText(id,C-10,o,b,"end","middle",t.labels.fontColor,val),t.isIE||g.classList.add("label"),x.appendChild(g)),a+=n,++r)}(this),function(t){if(!t.gridY.show)return;let i=t.labels.list.length,l=y/(3*i+1),n=null,a=0,o=t.padding.top,r=t.padding.top+v+5,d=document.createElementNS(e,"g");t.panel.appendChild(d);for(let e=0;e<i;e++)a=C+3*l/2+3*l*e+l/2,n=createElement("line",{id:t.id+"-grid-y-"+e,x1:a,y1:o,x2:a,y2:r,stroke:t.gridY.stroke,"stroke-width":t.gridY.width,"stroke-dasharray":t.gridY.dasharray,"stroke-linecap":t.gridY.linecap}),t.isIE||(n.classList.add("grid"),n.classList.add("grid-y")),d.appendChild(n)}(this),function(t){if(!t.labels.show)return;let i=t.labels.list.length,l=0;l=y/(3*i+1);let n=0,a=t.labels.list,o="",r="",d=0,s=0;d=0,s=t.padding.top+v+t.labels.fontSize/2,o="middle",r="hanging";let h=document.createElementNS(e,"g");t.isIE||h.classList.add("labels"),t.panel.appendChild(h),a.forEach(function(e){d=C+(3*n+1+1)*l,val=e,t.axisY.value&&(val+=" "+t.axisY.value),e=createText(t.id+"-label-"+n,d,s,t.labels.fontSize,"middle","hanging",t.labels.fontColor,val),t.isIE||e.classList.add("label"),h.appendChild(e),++n})}(this),function(t){let i=document.createElementNS(e,"g");t.isIE||i.classList.add("axes"),t.panel.appendChild(i),i.appendChild(A(t)),i.appendChild(k(t))}(this),L(this),S(this),E(this)),t&&this.restartAnimation(this)};